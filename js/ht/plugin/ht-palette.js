!function(x,S){"use strict";function A(){return document}function k(){return o("div")}function g(){return o("canvas")}function w(){return document.body}function K(x,S,A){x.style.setProperty(S,A,f)}function r(x,S){x.appendChild(S)}function Q(x,S){x.removeChild(S)}function s(x){this.$22h=x,this.addListeners()}var L="px",Y="innerHTML",p="className",M=ht.Default,G=ht.Color,V=ht.Node,e="top",q=M.animate,R=M.getInternal(),E="0",y="none",a="max-height",B="font",n="background",W="border-box",D="user-select",I="box-sizing",m="overflow",H=M.isTouchable,O=M.isTouchEvent,R=M.getInternal(),P=G.titleIconBackground,_=M.scrollBarInteractiveSize,C=/msie 9/.test(x.navigator?x.navigator.userAgent.toLowerCase():""),f=null,o=function(x){return A().createElement(x)},z=R.addEventListener,x=(R.removeEventListener,R.addMethod(M,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:P,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:P}]},paletteTitleLabelColor:M.labelSelectColor,paletteTitleLabelFont:M.labelFont,paletteContentLabelFont:M.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:M.widgetTitleHeight,paletteTitleBackground:G.titleBackground,paletteTitleHoverBackground:G.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:void 0,paletteItemHoverBorderColor:G.highlight,paletteItemSelectBackground:G.highlight},!0),".palette-item:hover{border: 1px solid "+M.paletteItemHoverBorderColor+" !important} .palette-header:hover{background: "+M.paletteTitleHoverBackground+" !important}"),P=document.createElement("style");H||(P.styleSheet?P.styleSheet.cssText=x:P.appendChild(A().createTextNode(x))),A().getElementsByTagName("head")[0].appendChild(P);M.def(s,S,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var x=this;x.$36h&&w().removeChild(x.$36h),x.$23h=x.$24h=x.$25h=x.$35h=x.$36h=f},handle_touchstart:function(x){for(var S,A,G=this,s=G.$22h,w=x.target,D=s.sm(),H=s.dm(),P="palette-header",O="palette-item",_=!1,k=!1,g=!1;w&&(w[p]||"").indexOf(P)<0&&(w[p]||"").indexOf(O)<0;)w=w.parentNode;w&&0<=w[p].indexOf("palette-header-tool")?_=!0:w&&0<=w[p].indexOf(P)?g=!0:w&&0<=w[p].indexOf(O)&&(k=!0),M.isLeftButton(x)?G.$27h(x)?(G.$24h=M.getClientPoint(x),G.$25h=s.ty()):_?(M.preventDefault(x),S=w.parentNode.$11h,(_=(A=H.getDataById(S)).s("tools")[w.toolIndex]).action&&_.action.call(s)):g?(M.preventDefault(x),S=w.$11h,(A=H.getDataById(S)).isExpanded()?A.setExpanded(!1):A.setExpanded(!0)):k?(S=w.$11h,_=H.getDataById(S),D.ss(_),s.handleDragAndDrop&&(M.preventDefault(x),_.s("draggable")&&(s.handleDragAndDrop(x,"prepare"),G.$35h=0)),_.s("draggable")||(M.preventDefault(x),G.$24h=M.getClientPoint(x),G.$25h=s.ty())):(M.preventDefault(x),G.$24h=M.getClientPoint(x),G.$25h=s.ty()):G.$26h(x)},handle_mousedown:function(x){this.handle_touchstart(x)},handle_mousewheel:function(x){this.handleScroll(x,x.wheelDelta/40,x.wheelDelta!==x.wheelDeltaX)},handle_DOMMouseScroll:function(x){this.handleScroll(x,-x.detail,1)},handleScroll:function(x,S,A){var G=this.$22h;M.preventDefault(x),A&&G._41o()&&G.ty(G.ty()+20*S)},handle_mouseup:function(x){this.handle_touchend(x)},handle_touchend:function(x){this.$37h(x),this.$26h(x)},handleWindowMouseUp:function(x){this.handleWindowTouchEnd(x)},handleWindowTouchEnd:function(x){this.$37h(x),this.$26h(x)},$37h:function(x){var S=this.$22h;2===this.$35h&&(this.$35h=3,S.handleDragAndDrop(x,"end"))},handleWindowMouseMove:function(x){this.handleWindowTouchMove(x)},handleWindowTouchMove:function(x){var S=this,A=S.$22h,G=S.$23h,s=S.$24h,w=S.$25h,D=M.getClientPoint(x),H=A._29I,P=S.$36h;1===S.$35h||2===S.$35h?(S.$35h=2,A.handleDragAndDrop(x,"between"),O(x)&&(x=x.touches[0]||x.changedTouches[0]),P.style.left=x.pageX-parseInt(P.width)/2+L,P.style.top=x.pageY-parseInt(P.height)/2+L):"p"===G?A.ty(w+D.y-s.y):"v"===G&&A.ty(w+(s.y-D.y)/H.height*A._59I)},handle_mousemove:function(x){this.handle_touchmove(x)},handle_touchmove:function(x){var S,A,G,s;!M.isDragging()&&M.isLeftButton(x)&&(G=(A=this).$22h,S=A.$27h(x),A.$24h?A.$23h||M.getDistance(M.getClientPoint(x),A.$24h)<2||(A.$23h=S?"v":"p",M.startDragging(A,x)):S?G._43o():0===A.$35h&&(A.$35h=1,G.handleDragAndDrop(x,"begin"),M.startDragging(A,x),O(x)&&(x=x.touches[0]||x.changedTouches[0]),S=A.$36h=new Image,A=G.$10h[G.sm().ld().getId()].querySelector(".images-box"),G=parseInt(A.style.width),s=parseInt(A.style.height),S.draggable=!1,S.src=A.toDataURL(),S.width=G,S.height=s,S.style.position="absolute",S.style.left=x.pageX-G/2+L,S.style.top=x.pageY-s/2+L,w().appendChild(S)))},$27h:function(x){var S=this.$22h,A=S.getView(),G=A.getBoundingClientRect(),s=S._29I,x=x.clientX-G.left+A.scrollLeft;return S._41o()&&s.x+s.width-x<_}}),ht.widget.Palette=function(x){var S,A=this,G=A._view=R.createView(null,A);A.$9h={},A.$10h={},A.$4h={},A._29I={x:0,y:0,width:0,height:0},A._59I=0,A.dm(x||new ht.DataModel),G[p]="ht-widget-palette",A.$29h=new s(A),K(G,n,M.paletteContentBackground),K(G,m,"auto"),K(G,I,W),K(G,"-moz-"+I,W),K(G,"-webkit-"+D,y),K(G,"-moz-"+D,y),K(G,"-ms-"+D,y),K(G,D,y),K(G,"position","absolute"),K(G,"overflow","hidden"),r(G,A._79O=(x=k(),(S=x.style).msTouchAction=y,S.cursor="default",H&&S.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",f),S.position="absolute",S.left=E,S.top=E,x)),z(G,"dragstart",function(x){x.dataTransfer&&(x.dataTransfer.setData("Text","nodeid:"+x.target.$11h),x.dataTransfer.effectAllowed="all",A.$29h.$26h())})},G="Palette",x={ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_bnb:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:M.autoHideScrollBar,_scrollBarSize:M.scrollBarSize,_scrollBarColor:M.scrollBarColor,getViewRect:function(){return this._29I},ty:function(x){if(x==f)return this.getTranslateY();this.setTranslateY(x)},setTranslateY:function(x){var S;this.$32h==f&&(x=this.$33h(x),S=this.$30h,this.$30h=x,this.fp("translateY",S,x))},getTranslateY:function(){return this.$30h},setLayout:function(x){var S,A,G=this,s=G._layout;"smallicons"===(G._layout=x)?S=A=20:"iconsonly"===x?S=A=50:(S=70,A=50),G.setItemImageWidth(S),G.setItemImageHeight(A),G.setItemImagePadding(4),G.fp("layout",s,x)},getDataAt:function(x){for(var S=x.target;S&&S.$11h==f;)S=S.parentNode;if(S&&S.$11h!=f)return this.getDataModel().getDataById(S.$11h)},$20h:function(){var x=16;return H&&(x*=1.2),x},$19h:function(){return M.paletteTitleHeight},$18h:function(){var x=M.paletteSeparatorWidth,S=M.paletteTitleBackground,S=M.paletteSeparatorColor||M.brighter(S);return x+L+" solid "+S},$17h:function(x){K(x,"cursor","pointer"),K(x,"display","inline-block"),K(x,"margin-right",(H?8:4)+L),K(x,"vertical-align",e)},$1h:function(x){var S=this,A=k(),G=k(),s=o("span"),w=(A[p]="palette-header",K(A,"position","relative"),K(A,n,M.paletteTitleBackground),K(A,"color",M.paletteTitleLabelColor),K(A,e,E),K(A,I,W),K(A,"-moz-"+I,W),K(A,"padding","0 5px 0 0"),K(A,"border-top",S.$18h()),K(A,"width","100%"),K(A,"cursor","pointer"),K(A,"white-space","nowrap"),K(A,m,"hidden"),K(A,B,M.paletteTitleLabelFont),K(A,"line-height",S.$19h()+L),A.$11h=x.getId(),g()),D=S.$19h(),H=S.$20h(),P=(S.$17h(w),R.setCanvas(w,H,D),r(A,w),x.s("tools"));if(P)for(var O=0;O<P.length;O++){var _=g();S.$17h(_),R.setCanvas(_,H,D),_[p]="palette-header-tool palette-header-tool"+x.getId()+"-"+O,_.style.position="absolute",_.style.right=(H+10)*O+"px",_.toolIndex=O,r(A,_)}return w[p]="palette-toggle-icon-"+x.getId(),G[p]="palette-content",K(G,"max-height",0+L),K(G,B,M.paletteContentLabelFont),K(G,m,"hidden"),G.$11h=x.getId(),S.$9h[x.getId()]=G,s[Y]=x.getName(),K(s,B,M.paletteTitleLabelFont),r(A,w),r(A,s),[A,G]},$2h:function(x){var S=this,A=S._layout,G=C&&x.s("draggable")?o("a"):k(),s=g(),w=k(),D=x.getName()||"",H=x.s("title")||x.getToolTip()||D,P=S._itemMargin,O=(s[p]="images-box",S.getItemImageWidth()),_=S.getItemImageHeight();return R.setCanvas(s,O,_),r(G,s),w[Y]=D,w[p]="label-box","iconsonly"!==A&&r(G,w),G[p]="palette-item",K(G,"vertical-align",e),K(G,"cursor","pointer"),K(G,"border-radius",5+L),K(G,"border","1px solid transparent"),K(G,"text-align","center"),K(G,"display","inline-block"),K(G,"margin-left",P+L),K(G,"margin-top",P+L),K(G,"color",M.paletteContentLabelColor),"smallicons"===A?(K(s,"vertical-align","middle"),K(G,"margin-left",2+L),K(G,"margin-top",2+L),K(G,"padding",2+L),K(G,"text-align","left"),K(w,"display","inline-block"),K(w,"min-width",S.$21h+S._itemMargin+L)):"largeicons"===A&&(K(w,"max-width",O+L),K(w,"overflow","hidden")),G.$11h=x.getId(),H&&(G.title=H),x.s("draggable")&&!S.handleDragAndDrop&&(C?(G.href="#",K(G,"text-decoration",y)):(G.draggable="true",K(G,"transform","translate(0,0)"),K(G,"z-index","0"))),G},$16h:function(x,S,A,G){x=R.initContext(x),R.translateAndScale(x,0,0,1),x.clearRect(0,0,A,A),A=(A-G)/2;M.drawStretchImage(x,M.getImage(S),"fill",0,A,G,G),x.restore()},$15h:function(x){var S,A,G=x.getId(),G=this._view.querySelector(".palette-toggle-icon-"+G),x=x.isExpanded()?M.paletteCollapseIcon:M.paletteExpandIcon;G&&x&&(S=this.$19h(),A=this.$20h(),this.$16h(G,x,S,A))},_drawToolsIcon:function(x){var S=x.s("tools");if(S)for(var A=0;A<S.length;A++){var G=this._view.querySelector(".palette-header-tool"+x.getId()+"-"+A),s=S[A].icon,w=this.$19h(),D=this.$20h();this.$16h(G,s,w,D)}},$14h:function(x){var S,A,G,s=this,w=x.getId(),w=s.$10h[w].querySelector(".images-box"),D=x.getImage(),H=x.s("image.stretch");w&&D&&(w=R.initContext(w),S=s.getItemImagePadding(),S="smallicons"===s._layout?S/2:S,A=s.getItemImageWidth()-2*S,G=s.getItemImageHeight()-2*S,R.translateAndScale(w,0,0,1),w.clearRect(0,0,A,G),M.drawStretchImage(w,M.getImage(D),H,S,S,A,G,x,s,s.getBodyColor(x)),w.restore())},validateImpl:function(){var A=this,x=A.$9h,S=A._layout,G=A.$10h,s=A.$4h,w=A._view,D=A.dm();if(A.$13h&&(delete A.$13h,s={},D.each(function(x){s[x.getId()]=x})),"smallicons"===S)for(var H in s){var P=s[H];P instanceof V&&(P=P.getName()||"",P=M.getTextSize(M.paletteContentLabelFont,P).width,A.$21h!=f&&A.$21h>P||(A.$21h=P))}for(H in s){var O,_,k,g,K,p,e,R,y,B=s[H];D.contains(B)?B instanceof ht.Group?(k=A.$1h(B),(K=G[B.getId()])&&(O=K.nextSibling,Q(w,O),Q(w,K)),K=D.getSiblings(B).indexOf(B),(_=w.children[2*K]||A._79O)&&_.parentNode?(w.insertBefore(k[0],_),w.insertBefore(O||k[1],_)):(w.appendChild(k[0]),w.appendChild(O||k[1])),G[B.getId()]=k[0],g=x[B.getId()]=O||k[1],_=B.$12h,k=B.s("promptText"),_||(B.$12h=o("div"),B.$12h[Y]=k||"",_=B.$12h),0===B.getChildren().size()?g.contains(_)||r(g,_):g.contains(_)&&Q(g,_)):(p=B.getParent())&&(k=A.$2h(B),e=G[B.getId()],g=x[p.getId()],e&&Q(e.parentNode,e),K=D.getSiblings(B).indexOf(B),(e=g.children[K])?g.insertBefore(k,e):r(g,k),G[B.getId()]=k,A.$14h(B)):(R=(e=G[B.getId()]).parentNode,B instanceof ht.Group?(y=e.nextSibling,Q(w,e),Q(w,y),delete x[B.getId()]):(Q(R,e),0===R.children.length&&(p=D.getDataById(R.$11h))&&(_=p.$12h)&&!R.contains(_)&&r(R,_)),delete G[B.getId()])}A.$4h={};function n(){var x=A._59I,S=0;A.$32h!=f&&(clearInterval(A.$32h),S=0,delete A.$32h),A.$32h=setInterval(function(){A.$31h(),x===A._59I?2<=++S&&(clearInterval(A.$32h),delete A.$32h):(S=0,x=A._59I)},30)}var W,I;for(W in x)g=x[W],B=D.getDataById(x[W].$11h),A.$15h(B),A._drawToolsIcon(B),B.isExpanded()?(g.style.maxHeight===0+L?(I=g.scrollHeight+A._itemMargin+L,q(g).duration(200).set(a,I).set("padding-bottom",A._itemMargin+L).end(function(){n()})):g.style.maxHeight=g.scrollHeight+L,g.style.paddingBottom=A._itemMargin+L):g.style.maxHeight!==0+L&&q(g).duration(200).set(a,E).set("padding-bottom",E).end(function(){n()});A.$28h(),A.$31h()},$31h:function(){for(var x=this,S=x._view,A=0,G=S.children,s=0;s<G.length;s++){var w=G[s];w.className&&0<=w.className.indexOf("palette-")&&(A+=w.offsetHeight)}x._59I=A,x.$30h=x.$33h(x.ty());var D=x.ty();S.scrollTop=-D,x._29I={x:0,y:-D,width:S.clientWidth,height:S.clientHeight},K(x._79O,e,-D+L),x._93I()},$33h:function(x){var S=this._29I.height-this._59I;return 0<(x=x<S?S:x)?0:Math.round(x)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(x){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(x.property)<0&&this.redraw(),"translateY"===x.property&&(this.iv(),this._43o())},findDataByName:function(x){for(var S=this.dm().getDatas(),A=0;A<S.size();A++){var G=S.get(A);if(G.getName()===x)return G}},setDataModel:function(x){var S=this,A=S._dataModel,G=S._selectionModel;A!==x&&(A&&(A.umm(S.$6h,S),A.umd(S.$8h,S),A.umh(S.$7h,S),G||A.sm().ums(S.$28h,S)),(S._dataModel=x).mm(S.$6h,S),x.md(S.$8h,S),x.mh(S.$7h,S),G?G._21I(x):x.sm().ms(S.$28h,S),S.sm().setSelectionMode("single"),S.fp("dataModel",A,x))},$6h:function(x){var S=this,A=S._view,G=x.data,s=S.$4h;"add"===x.kind||"remove"===x.kind?s[G.getId()]=G:"clear"===x.kind&&(S.$10h={},S.$9h={},S.$4h={},A[Y]=""),S.iv()},$7h:function(x){x=x.data;this.$4h[x.getId()]=x,this.iv()},$8h:function(x){var S=x.data;"expanded"!==x.property&&(this.$4h[S.getId()]=S),this.iv()},$28h:function(){var S,A=this,x=A.sm(),G=x.ld();this.dm().each(function(x){(S=A.$10h[x.getId()])&&0<=S[p].indexOf("palette-item")&&(x===G?K(S,n,M.paletteItemSelectBackground):S.style.removeProperty(n))})}},M.def(ht.widget[G],S,x)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);
