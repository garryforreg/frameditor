!function(m,E){"use strict";function B(m){return e().createElement(m)}function _(){return B("canvas")}function H(m,E,B){m.style.setProperty(E,B,kQ)}function b(m,E){m.appendChild(E)}function q(m,E){m.removeChild(E)}var y,X="position",k="absolute",W="px",M="left",C="right",r="top",l="bottom",N="display",$=ht.Default,F=$.getInternal(),A=Math.floor,f=Math.ceil,I=Math.PI,kQ=null,T=m.parseInt,e=function(){return document},c=(F=$.getInternal()).addEventListener,J=F.removeEventListener;ht.widget.RulerFrame=function(m){var B=this,y=B._view=F.createView(null,B),E=B.$1k=_(),$=B.$2k=_(),q=B.$3k=_(),f=B.$4k=_();B._defaultRulerConfig={size:20,borderWidth:1,borderStyle:"solid",borderColor:"#888",defaultMajorTickSpacing:50,minMajorTickSpacing:10,minPhysicalMajorTickSpacing:40,maxPhysicalMajorTickSpacing:100,tickSpacingAdaptable:!0,majorTickTextFont:"12px Arial",majorTickTextColor:"#666",majorTickColor:"#888",minorTickColor:"#ccc",background:"rgba(0,0,0,0)",guideColor:"rgb(0, 173, 239)",guideWidth:2,guideVisible:!1,guideTipVisible:!1,guideTipBorderColor:"#666",guideTipTextColor:"#666",guideTipTextFont:"12px Arial",guideTipBackground:"#fff"},B._topRulerConfig={visible:!0},B._rightRulerConfig={visible:!1},B._bottomRulerConfig={visible:!1},B._leftRulerConfig={visible:!0},b(y,E),b(y,q),b(y,$),b(y,f),H(y,X,"relative"),H(y,"box-sizing","border-box"),H(y,"-moz-box-sizing","border-box"),H(E,X,k),H($,X,k),H(q,X,k),H(f,X,k),B.$14k=function(m){B.$13k=1,B.iv()},B.$15k=function(m){var E;(B._topRulerConfig.guideVisible||B._rightRulerConfig.guideVisible||B._bottomRulerConfig.guideVisible||B._leftRulerConfig.guideVisible||B._defaultRulerConfig.guideVisible||(B._topRulerConfig.guideTipVisible||B._rightRulerConfig.guideTipVisible||B._bottomRulerConfig.guideTipVisible||B._leftRulerConfig.guideTipVisible||B._defaultRulerConfig.guideTipVisible)&&B._component)&&(E=y.getBoundingClientRect(),B.$16k={x:m.clientX-E.left,y:m.clientY-E.top},B.$5k())},B.setComponent(m)},m="RulerFrame",y={ms_v:1,ms_fire:1,ms_ac:["defaultRulerConfig","topRulerConfig","rightRulerConfig","bottomRulerConfig","leftRulerConfig","component"],setComponent:function(m){var E,B=this,y=B._component,$=B.getView();$&&(B._component=m,B.fp("component",y,m),y&&(E=B.getComponentView(y),q($,E),J($,"mousemove",B.$15k),B.removeComponentPropertyChangeListener(y,B.$14k)),m&&(E=B.getComponentView(m),b($,E),H(E,X,k),c($,"mousemove",B.$15k),B.addComponentPropertyChangeListener(m,B.$14k)))},addComponentPropertyChangeListener:function(m,E){m&&m.mp&&m.mp(E)},removeComponentPropertyChangeListener:function(m,E){m&&m.ump&&m.ump(E)},getComponentHZoom:function(m){return m&&m.getZoom?m.getZoom():1},getComponentVZoom:function(m){return m&&m.getZoom?m.getZoom():1},getComponentViewRect:function(m){if(m&&m.getViewRect)return m.getViewRect()},getComponentView:function(m){return m&&m.getView?m.getView():m},invalidateComponent:function(m){m&&m.iv&&m.iv()},validateComponent:function(m){m&&m.validate&&m.validate()},$7k:function(m,E,B,y,$,q,f,_,b,X,k,e){var c,J,W,M,C;E.visible?(C=this._defaultRulerConfig,c=E[c="borderStyle"]||C[c],J=E[J="borderColor"]||C[J],W=E[W="borderWidth"]||C[W],M=(E.size!=kQ?E:C).size,C=E[E="background"]||C[E],E=this.$6k(W,c,J,m,B,$,M+W,f,_,b,X,k,e),H(m,$,"0px"),q?F.setCanvas(m,y-E,M):F.setCanvas(m,M,y-E),H(m,"background",C),H(m,N,"block")):(H(m,N,"none"),H(this.getComponentView(this._component),$,"0px"))},$6k:function(m,E,B,y,$,q,f,_,b,X,k,e,c){var J=0;return H(y,$,m+"px "+E+" "+B),H(this.getComponentView(this._component),q,f+W),_?(H(y,b,X+W),J+=X):H(y,b,"0px"),k?(H(y,e,c+W),J+=c):H(y,e,"0px"),J},validateImpl:function(){var m,E,B,y=this,$=y._component,q=y.$1k,f=y.$2k,_=y.$3k,b=y.$4k,X=y._view,k=y._defaultRulerConfig,e=y._topRulerConfig,c=y._rightRulerConfig,J=y._bottomRulerConfig,W=y._leftRulerConfig,k=k.size;X&&$&&(m=e.size!=kQ?e.size:k,E=c.size!=kQ?c.size:k,B=J.size!=kQ?J.size:k,k=W.size!=kQ?W.size:k,y.$7k(q,e,"border-bottom",X.offsetWidth,r,!0,W.visible,M,k,c.visible,C,E),y.$7k(f,c,"border-left",X.offsetHeight,C,!1,e.visible,r,m,J.visible,l,B),y.$7k(_,J,"border-top",X.offsetWidth,l,!0,W.visible,M,k,c.visible,C,E),y.$7k(b,W,"border-right",X.offsetHeight,M,!1,e.visible,r,m,J.visible,l,B),y.$13k?delete y.$13k:y.invalidateComponent($),y.validateComponent($),y.$5k())},$5k:function(){var V=this,m=V.$1k,E=V.$2k,B=V.$3k,y=V.$4k,$=V._topRulerConfig,q=V._rightRulerConfig,f=V._bottomRulerConfig,_=V._leftRulerConfig,b=V._defaultRulerConfig,X=V._component,k=V.getComponentViewRect(X),S=V.getComponentHZoom(X),j=V.getComponentVZoom(X),F=k.x*S,A=F+k.width*S,I=k.y*j,T=I+k.height*j,a=V._defaultRulerConfig.size,g="defaultMajorTickSpacing",p="maxPhysicalMajorTickSpacing",L="minPhysicalMajorTickSpacing",n="tickSpacingAdaptable",P="majorTickTextFont",D="majorTickTextColor",v="majorTickColor",x="minorTickColor",h="guideVisible",K="guideTipVisible",d="guideTipBorderColor",O="guideTipTextColor",z="guideTipTextFont",u="guideTipBackground",R="guideColor",t="guideWidth",U="minMajorTickSpacing",o=b[g],s=b[p],i=b[L],Z=b[n],Q=b[P],w=b[D],G=b[v],mQ=b[U],EQ=b[x],BQ=b[h],yQ=b[K],$Q=b[d],qQ=b[O],fQ=b[z],_Q=b[u],bQ=b[R],XQ=b[t];function e(m,E,B,y,$,q){var f,_,b,X,k,e,c,J,W,M,C,H,r,l,N,Y;E.visible&&(m=m.getContext("2d"),f=E[g]||o,Y=E[n]!=kQ?E[n]:Z,_=E[P]||Q,b=E[D]||w,X=E.size!=kQ?E.size:a,k=E[v]||G,e=E[U]||mQ,c=E[x]||EQ,J=E[h]!=kQ?E[h]:BQ,W=E[K]!=kQ?E[K]:yQ,M=E[d]!=kQ?E[d]:$Q,C=E[O]!=kQ?E[O]:qQ,H=E[z]!=kQ?E[z]:fQ,r=E[u]!=kQ?E[u]:_Q,l=E[R]||bQ,N=E[t]||XQ,Y&&(f=V[q]=V.$8k(V[q]||f,E[p]||s,E[L]||i,y?S:j,e)),B.call(V,m,F,I,A,T,X,y?S:j,f,_,b,$,k,c),Y=V.$16k,(J||W)&&Y&&(y?V.$9k(m,Y.x,X,l,N,J,W,M,C,H,r):V.$10k(m,Y.y,X,l,N,J,W,M,C,H,r,$)))}V._view&&X&&(e(m,$,V.$11k,!0,!1,"_currentTopMajorTickSpacing"),e(E,q,V.$12k,!1,!0,"_currentRightMajorTickSpacing"),e(B,f,V.$11k,!0,!0,"_currentBottomMajorTickSpacing"),e(y,_,V.$12k,!1,!1,"_currenLeftMajorTickSpacing"))},$8k:function(m,E,B,y,$){return m*y<B?m=A(E/y/$)*$:E<m*y&&(m=f(B/y/$)*$),m},getHTipText:function(m){var E=this._component,B=0,y=this._view.getBoundingClientRect();return E.lp?B=T(E.lp({x:m.x+y.left,y:m.y}).x):B-=T(this.getComponentView(E).style.left)||0,B},$9k:function(m,E,B,y,$,q,f,_,b,X,k){var e=this._component,e=(m.save(),F.translateAndScale(m,0,0,1),E-(T(this.getComponentView(e).style.left)||0));E=this.getHTipText(this.$16k),q&&(m.beginPath(),m.fillStyle=y,m.rect(e,0,$,B),m.fill()),f&&(m.beginPath(),m.textAlign="center",m.textBaseline="middle",m.font=X,q=m.measureText(E).width+6,m.fillStyle=k,m.rect(e-q/2,0,q,B),m.fill(),m.strokeStyle=_,m.stroke(),m.beginPath(),m.fillStyle=b,m.fillText(E,e,0+B/2)),m.restore()},getVTipText:function(m){var E=this._component,B=0,y=this._view.getBoundingClientRect();return E.lp?B=T(E.lp({x:m.x,y:m.y+y.top}).y):B-=T(this.getComponentView(E).style.top)||0,B},formatScaleText:function(m){return Math.round(m)},$10k:function(m,E,B,y,$,q,f,_,b,X,k,e){var c=this._component,J=(m.save(),F.translateAndScale(m,0,0,1),B/2),c=E-(T(this.getComponentView(c).style.top)||0);E=this.getVTipText(this.$16k),q&&(m.beginPath(),m.fillStyle=y,m.rect(J-B/2,c,B,$),m.fill()),f&&(m.translate(J,c),m.rotate((e?90:-90)*I/180),m.translate(-J,-c),m.beginPath(),m.textAlign="center",m.textBaseline="middle",m.font=X,q=m.measureText(E).width+6,m.fillStyle=k,m.rect(J-q/2,c-B/2,q,B),m.fill(),m.strokeStyle=_,m.stroke(),m.fillStyle=b,m.fillText(E,J,c)),m.restore()},$11k:function(m,E,B,y,$,q,f,_,b,X,k,e,c){m.save();for(var J=E,W=(J+y)/2,M=(y=y-J,F.translateAndScale(m,E=0,0,1),0),C=0,H=T(q/2),r=q-H,l=k?0:H,N=_*f,Y=N/10,H=(m.clearRect(E-=N,0,(y+=N)-E,q),m.beginPath(),m.fillStyle=c,A(W/Y)*Y-J),M=H;M<y;M+=Y)m.rect(M,0+l,1,r);for(M=H;E<M;M-=Y)m.rect(M,0+l,1,r);for(m.fill(),l=k?0:1,m.beginPath(),m.fillStyle=e,M=H=A(W/N)*N-J;M<y;M+=N)m.rect(M,0+l,1,q-1);for(M=H;E<M;M-=N)m.rect(M,0+l,1,q-1);m.fill();c=(T(/\d+px/.exec(b)[0])||10)/2,m.textBaseline="middle",l=k?q-c-2:2+c,m.beginPath(),m.fillStyle=X,m.font=b,e=A(W/N)*N/f;for(M=H,C=e;M<y;M+=N,C+=_){var V=this.getHScaleText?this.getHScaleText(M):C;m.fillText(this.formatScaleText(V),M+2,0+l)}for(M=H,C=e;E<M;M-=N,C-=_){V=this.getHScaleText?this.getHScaleText(M):C;m.fillText(this.formatScaleText(V),M+2,0+l)}m.restore()},$12k:function(f,m,E,B,y,$,q,_,b,X,k,e,c){f.save();for(var J=E,W=(J+y)/2,M=(y=y-J,F.translateAndScale(f,E=0,0,1),0),C=this,H=0,r=T($/2),l=$-r,N=k?0:r,Y=_*q,V=Y/10,r=(f.clearRect(0,0,$,(y+=Y)-(E-=Y)),f.beginPath(),f.fillStyle=c,A(W/V)*V-J),M=r;M<y;M+=V)f.rect(0+N,M,l,1);for(M=r;E<M;M-=V)f.rect(0+N,M,l,1);for(f.fill(),N=k?0:1,f.beginPath(),f.fillStyle=e,M=r=A(W/Y)*Y-J;M<y;M+=Y)f.rect(0+N,M,$-1,1);for(M=r;E<M;M-=Y)f.rect(0+N,M,$-1,1);f.fill();var c=(T(/\d+px/.exec(b)[0])||10)/2,S=90*I/180;function j(m,E,B,y,$,q){$=C.getVScaleText?C.getVScaleText(B):$,$=C.formatScaleText($),f.translate(m+E,B),f.rotate(-y),f.translate(-m-E,-B),f.fillText($,m+E+(q?2:1),B),f.translate(m+E,B),f.rotate(y),f.translate(-m-E,-B)}f.textBaseline="middle",N=k?$-c:2+c,S=k?-S:S,f.beginPath(),f.fillStyle=X,f.font=b;e=A(W/Y)*Y/q;for(M=r,H=e;M<y;M+=Y,H+=_)j(0,N,M,S,H,k);for(M=r,H=e;E<M;M-=Y,H-=_)j(0,N,M,S,H,k);f.restore()},onPropertyChanged:function(){this.iv()},dispose:function(){var m=this,E=m._component,B=m._view;E&&m.removeComponentPropertyChangeListener(E,m.$14k),B&&(J(B,"mousemove",m.$15k),q(B.parentNode,B),m._view=null)}},$.def(ht.widget[m],E,y)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);